# 민감정보 분류 및 관리 문서

## 1. 개요

본 시스템은 환자 진료정보를 관리하며, 개인정보보호법 및 의료법에 따라 민감정보를 별도 테이블로 분리 저장합니다.

## 2. 테이블 분리 구조

### `patients` 테이블 (비민감 진료정보)

| 컬럼 | 설명 | 민감도 |
|------|------|--------|
| id | 환자 고유번호 (예: A20250001) | 낮음 (가명처리된 식별자) |
| primary_diagnosis | 주진단명 | 중간 (진료정보) |
| created_at | 등록일 | 낮음 |

### `patient_sensitive` 테이블 (민감 개인정보)

| 컬럼 | 설명 | 민감도 | 분류 |
|------|------|--------|------|
| patient_id | 환자 고유번호 (FK) | 식별자 | 가명정보 |
| name | 이름 | **높음** | 개인식별정보 |
| birth_date | 생년월일 | **높음** | 개인식별정보 |
| gender | 성별 | 중간 | 개인식별정보 |
| phone | 전화번호 | **높음** | 연락처정보 |

## 3. 분리 근거

- **개인정보보호법 제23조**: 민감정보(건강정보)의 별도 관리 의무
- **의료법 제21조**: 환자 정보의 비밀 유지 의무
- **최소 권한 원칙**: 진료정보 조회 시 개인식별정보 접근을 분리

## 4. 접근 제어 원칙

| 역할 | `patients` | `patient_sensitive` | `audit_log` |
|------|-----------|---------------------|-------------|
| 담당의 | 읽기 | 읽기 | 쓰기 |
| 일반 의료진 | 읽기 | 제한 | 쓰기 |
| 시스템 관리자 | 읽기 | 제한 | 읽기 |

## 5. 감사 로그

모든 환자 정보 접근은 `audit_log` 테이블에 기록됩니다:

- **검색 (`search`)**: 환자 고유번호 검색 시
- **조회 (`view`)**: 진료 요약 화면 접근 시
- **전체 기록 조회 (`view_records`)**: 전체 방문 기록 접근 시

## 6. 데이터 흐름

```
사용자 → 환자 고유번호 입력
       → GET /api/patients/:id (patients JOIN patient_sensitive)
       → POST /api/audit (접근 기록)
       → 화면에 진료정보 표시
```

## 7. 향후 개선 사항

- [ ] `patient_sensitive` 테이블 암호화 (AES-256)
- [ ] API 인증/인가 미들웨어 (JWT)
- [ ] 민감정보 접근 시 2차 인증
- [ ] 개인정보 보관 기간 정책 적용
- [ ] 데이터 마스킹 (이름: 김*훈, 전화번호: 010-****-2222)
